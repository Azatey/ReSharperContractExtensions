using System;
using System.Threading.Tasks;
using System.Diagnostics.Contracts;

class A
{
  public async Task FooIfThrow(string s)
  {
    |if (s == null) throw new ArgumentNullException("s");|(0)
  }

  public async Task FooWithLegacyCheck(string s)
  {
    |if (s == null) throw new ArgumentNullException("s");|(1)
    Contract.EndContractBlock();
  }

  public async Task FooWithRequires(string s)
  {
    |Contract.Requires(s != null);|(2)
  }

  protected async Task<int> FooIntWithRequires(string s)
  {
    |Contract.Requires(s != null);|(3)
    return 42;
  }
}
---------------------------------------------------------
(0): ReSharper Warning: Precondition in async method is asynchronous and will fail returning task
(1): ReSharper Warning: Precondition in async method is asynchronous and will fail returning task
(2): ReSharper Warning: Precondition in async method is asynchronous and will fail returning task
(3): ReSharper Warning: Precondition in async method is asynchronous and will fail returning task
